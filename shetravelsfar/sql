-- 1. Create the table
create table public.waitlist (
  id bigint generated by default as identity primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  first_name text not null,
  email text not null
);

-- 2. Enable Row Level Security (RLS) is crucial for Supabase
alter table public.waitlist enable row level security;

-- 3. Create a policy to allow anyone (public/anon) to insert data
create policy "Enable insert for everyone" 
on public.waitlist 
for insert 
to anon 
with check (true);

-- 4. Create a policy so only YOU (authenticated admins) can read the data
create policy "Enable read access for authenticated users only" 
on public.waitlist 
for select 
to authenticated 
using (true);